{"version":3,"sources":["images/accountIcon.svg","components/Navigation/Navigation.js","components/Header/Header.js","components/Promo/Promo.js","components/NavTab/NavTab.js","components/Info/Info.js","components/AboutProject/AboutProject.js","components/Techs/Techs.js","images/myPhoto.jpg","components/AboutMe/AboutMe.js","components/Portfolio/Portfolio.js","components/Main/Main.js","components/Footer/Footer.js","utils/useFormWithValidation.js","components/SearchForm/SearchForm.js","utils/utils.js","utils/MoviesApi.js","contexts/CurrentUserContext.js","components/MoviesCard/MoviesCard.js","components/Preloader/Preloader.js","components/MoviesCardList/MoviesCardList.js","components/Movies/Movies.js","components/SavedMovies/SavedMovies.js","components/Profile/Profile.js","components/AuthForm/AuthForm.js","components/Login/Login.js","components/Register/Register.js","components/NotFoundPage/NotFoundPage.js","components/Menu/Menu.js","components/InfoPopup/InfoPopup.js","utils/constants.js","utils/MainApi.js","utils/auth.js","components/ProtectedRoute/ProtectedRoute.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["Navigation","handleOnSavedMoviesClick","handleOnMoviesClick","useState","isMoviesClicked","setIsMoviesClicked","isSavedMoviesClicked","setIsSavedMoviesClicked","isMainClicked","setIsMainClicked","className","to","onClick","src","accountImg","alt","Header","pathname","isLoggedIn","handleMenuOpen","headerClassName","type","Promo","NavTab","href","Info","props","id","linkId","name","content","title","children","AboutProject","Techs","AboutMe","target","rel","myPhoto","Portfolio","Main","Footer","footerClassName","Date","getFullYear","useFormWithValidation","initialValues","React","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","event","value","validationMessage","closest","checkValidity","SearchForm","handleSearchSubmit","handleTumblerClick","isChecked","setIsChecked","onSubmit","e","preventDefault","movie","noValidate","placeholder","required","onChange","pattern","disabled","checked","checkMovieTitle","query","nameRU","toLowerCase","replaceAll","split","includes","nameEN","checkIfIsShort","duration","searchMovies","movies","queryArr","trim","filter","i","length","BASE_URL_MOVIE","moviesApi","options","this","baseUrl","res","ok","json","Promise","reject","Error","status","fetch","headers","then","_getResponseData","CurrentUserContext","createContext","MoviesCard","min","image","isOnSavedPage","saveMovie","deleteMovie","currentUser","useContext","isSaved","owner","_id","saveButtonClassName","trailer","style","background","url","aria-label","Math","floor","Preloader","MoviesCardList","movieList","isFound","isRequestDone","amountToRender","isLoading","moviesCardlistClassName","slice","map","uuidv4","Movies","handleMoreBtnClick","isMoreBtnVisible","SavedMovies","Profile","handleLogout","handleSubmit","email","method","minLength","maxLength","AuthForm","greeting","isNameVisible","buttonText","captionText","route","navLinkText","Login","onLogin","Register","onRegister","NotFoundPage","history","useHistory","goBack","Menu","handleMenuClose","isOpen","InfoPopup","closePopup","message","failMessage","movieSearchFailedMessage","defaultProp","mainApi","jwt","authorization","body","JSON","stringify","country","director","year","description","trailerLink","thumbnail","formats","movieId","deleteMovieFromSaved","BASE_URL","ProtectedRoute","Component","component","App","location","useLocation","setCurrentUser","setIsLoggedIn","isRegisterFailed","setIsRegisterFailed","isMenuOpen","setIsMenuOpen","isInfoPopupOpen","setIsInfoPopupOpen","setIsLoading","popupMessage","setPopupMessage","beatfilmMovies","setBeatfilmMovies","setMovies","savedMovies","setSavedMovies","isFoundInMovies","setIsFoundInMovies","isFoundInSavedMovies","setIsFoundInSavedMovies","setIsRequestDone","isRequestInSavedDone","setIsRequestInSavedDone","setAmountToRender","defaultAmountToRender","setDefaultAmountToRender","setIsMoreBtnVisible","setIsOnSavedPage","useEffect","localStorage","getItem","all","getMovies","getUserInfo","userInfo","setItem","parse","catch","err","console","log","finally","window","addEventListener","checkWidth","removeEventListener","token","data","push","handleTokenCheck","removeItem","renderValue","innerWidth","localMovies","updateMovies","isShortFilm","amount","moviesWithSavedOnes","savedItem","find","m","shortFilms","handleSearchInMovies","resolve","getBeatFilmMovies","searchPromise","openInfoPopup","handleSearchInSaved","searchInSavedPromise","localSavedMovies","filterShortFilmsInSaved","filterShortFilms","some","newSavedMovies","deletedMovie","newMovies","setEscListener","closeAllPopups","removeEscListener","handleEscClose","key","handleCLosePopupByClickOnOverlay","currentTarget","document","handleLogin","password","auth","Provider","exact","path","newAmount","updateUserInfo","isFailed","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f9f474aa.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/accountIcon.8c78cf51.svg\";","import { useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport './Navigation.css';\nimport accountImg from '../../images/accountIcon.svg';\n\n\nconst Navigation = ({ handleOnSavedMoviesClick, handleOnMoviesClick }) => {\n  const [isMoviesClicked, setIsMoviesClicked] = useState(false);\n  const [isSavedMoviesClicked, setIsSavedMoviesClicked] = useState(false);\n  const [isMainClicked, setIsMainClicked] = useState(false);\n\n  const handleMoviesClick = () => {\n    handleOnMoviesClick();\n    setIsMoviesClicked(true);\n    setIsSavedMoviesClicked(false);\n    setIsMainClicked(false);\n  }\n\n  const handleSavedMoviesClick = () => {\n    handleOnSavedMoviesClick();\n    setIsSavedMoviesClicked(true);\n    setIsMoviesClicked(false);\n    setIsMainClicked(false);\n  }\n\n  const handleMainClicked = () => {\n    setIsMainClicked(true);\n    setIsSavedMoviesClicked(false);\n    setIsMoviesClicked(false);\n  }\n\n  return (\n    <nav className=\"nav\">\n      <div className=\"nav__options\">\n        <NavLink to=\"/\" className={`nav__link nav__link_type_main ${isMainClicked && 'nav__link_active'}`}\n          onClick={handleMainClicked}>Главная</NavLink>\n        <div className=\"nav__movies\">\n          <NavLink to=\"/movies\" className={`nav__link ${isMoviesClicked && 'nav__link_active'}`}\n            onClick={handleMoviesClick}>Фильмы</NavLink>\n          <NavLink to=\"/saved-movies\" className={`nav__link ${isSavedMoviesClicked && 'nav__link_active'}`}\n            onClick={handleSavedMoviesClick}>Сохраненные фильмы</NavLink>\n        </div>\n        <NavLink to=\"/profile\" className=\"nav__account\">\n          <img className=\"nav__account-img\" src={accountImg} alt=\"Аккаунт\" />\n          Аккаунт\n        </NavLink>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navigation;","import './Header.css';\nimport { NavLink } from 'react-router-dom';\nimport Navigation from '../Navigation/Navigation';\n\nconst Header = ({ pathname, isLoggedIn, handleMenuOpen, handleOnSavedMoviesClick, handleOnMoviesClick }) => {\n  const headerClassName = (\n    `header \n      ${(pathname === '/movies' || pathname === '/saved-movies' || pathname==='/profile') && 'header_logged-in'}\n       ${pathname=== '/' && 'header_visible'}\n      `\n  )\n  return (\n    <header className={headerClassName}>\n      <div className=\"header__container\">\n        <NavLink to=\"/\" className=\"header__logo\"/>\n        {\n          !isLoggedIn && pathname === '/' ?\n            <nav className=\"header__options\">\n              <NavLink to=\"/signup\" className=\"header__option header__option_to-register\">Регистрация</NavLink>\n              <NavLink to=\"/signin\" className=\"header__option header__option_to-login\">Войти</NavLink>\n            </nav> :\n            <div className=\"header__nav\">\n              <Navigation handleOnSavedMoviesClick={handleOnSavedMoviesClick} handleOnMoviesClick={handleOnMoviesClick} />\n            </div>\n        }\n        {isLoggedIn && <button className=\"header__menu-btn\" type=\"button\" onClick={handleMenuOpen}></button>}\n      </div>\n    </header>\n  );\n}\n\nexport default Header;","import './Promo.css';\n\nconst Promo = () => {\n  return(\n    <section className=\"promo\">\n      <div className=\"promo__container\">\n        <h1 className=\"promo__title\">Учебный проект студента факультета Веб-разработки.</h1>\n      </div>\n    </section>\n  );\n}\n\nexport default Promo;","import './NavTab.css';\n\nconst NavTab = () => {\n  return (\n    <section className=\"navtab\">\n      <nav className=\"navtab__container\">\n        <ul className=\"navtab__list\">\n          <li className=\"navtab__item\">\n            <a href=\"#about-project\" className=\"navtab__link\">О проекте</a>\n          </li>\n          <li className=\"navtab__item\">\n            <a href=\"#techs\" className=\"navtab__link\">Технологии</a>\n          </li>\n          <li className=\"navtab__item\">\n            <a href=\"#about-student\" className=\"navtab__link\">Студент</a>\n          </li>\n        </ul>\n      </nav>\n    </section>\n\n  );\n};\n\nexport default NavTab;","import './Info.css';\n\nconst Info = (props) => {\n  return (\n    <section className={`info info_type_${props.type}`}>\n      <div className={`info__container info__container_type_${props.type}`}>\n        <h2 className=\"info__title\">\n          {// eslint-disable-next-line jsx-a11y/anchor-is-valid\n          <a id={props.linkId} name={props.linkId} className=\"info__anchor\">{props.content}</a>}\n        {props.title}\n      </h2>\n      {props.children}\n      </div>\n    </section>\n  );\n};\n\nexport default Info;","import './AboutProject.css';\nimport Info from '../Info/Info';\n\nconst AboutProject = () => {\n  return (\n    <Info title=\"О проекте\" linkId=\"about-project\" type=\"project\" content=\"Информация о проекте.\">\n      <ul className=\"project-info\">\n        <li className=\"project-info__phase\">\n          <p className=\"project-info__text project-info__text_type_title\">Дипломный проект включал 5 этапов</p>\n        </li>\n        <li className=\"project-info__phase-descr\">\n          <p className=\"project-info__text project-info__text_type_description\">Составление плана, работу над бэкендом, вёрстку, добавление функциональности и финальные доработки.</p>\n        </li>\n        <li className=\"project-info__timing\">\n          <p className=\"project-info__text project-info__text_type_title\">На выполнение диплома ушло 5 недель</p>\n        </li>\n        <li className=\"project-info__timing-descr\">\n          <p className=\"project-info__text project-info__text_type_description\">У каждого этапа был мягкий и жесткий дедлайн, которые нужно было соблюдать, чтобы успешно защититься.</p>\n        </li>\n      </ul>\n      <div className=\"project-info__scale\">\n        <div className=\"project-info__period\">\n          <p className=\"project-info__text\">1 неделя</p>\n        </div>\n        <p className=\"project-info__text project-info__text_type_back\">Back-end</p>\n        <div className=\"project-info__period\">\n          <p className=\"project-info__text\">4 недели</p>\n        </div>\n        <p className=\"project-info__text project-info__text_type_front\">Front-end</p>\n      </div>\n    </Info>\n  );\n};\n\nexport default AboutProject;","import './Techs.css';\nimport Info from '../Info/Info';\n\nconst Techs = () => {\n  return (\n    <Info title=\"Технологии\" linkId=\"techs\" type=\"techs\" content=\"Информация о технологиях.\">\n      <div className=\"techs\">\n        <h2 className=\"techs__title\">Технологии</h2>\n        <p className=\"techs__text\">На курсе веб-разработки мы освоили технологии, которые применили\n        в дипломном проекте.</p>\n        <ul className=\"techs__list\">\n          <p className=\"techs__item\">HTML</p>\n          <p className=\"techs__item\">CSS</p>\n          <p className=\"techs__item\">JS</p>\n          <p className=\"techs__item\">React</p>\n          <p className=\"techs__item\">Git</p>\n          <p className=\"techs__item\">Express.js</p>\n          <p className=\"techs__item\">mongoDB</p>\n        </ul>\n      </div>\n    </Info>\n  );\n};\n\nexport default Techs;","export default __webpack_public_path__ + \"static/media/myPhoto.c2719cec.jpg\";","import './AboutMe.css';\nimport Info from '../Info/Info';\nimport myPhoto from '../../images/myPhoto.jpg';\n\nconst AboutMe = () => {\n  return (\n    <Info title=\"Студент\" linkId=\"about-student\" type=\"student\" content=\"Информация о студенте.\">\n      <div className=\"student-info\">\n        <h2 className=\"student-info__title\">Анна</h2>\n        <p className=\"student-info__subtitle\">Фронтенд-разработчик, 29 лет</p>\n        <p className=\"student-info__text\">Я родилась и живу в Москве, закончила факультет товароведения\n        в РЭУ им. Плеханова. В свободное время люблю заниматься йогой и читать детективы. Несколько лет работала\n        в сфере маркетинга. Но тут в моей жизни появилось программирование. До сих пор удивляюсь, как можно было\n        раньше заниматься чем-то другим. </p>\n        <ul className=\"student-info__links\">\n          <li>\n            <a className=\"student-info__link\" href=\"https://www.facebook.com/anna.kozhevatova/\"\n              target=\"_blank\" rel=\"noreferrer\">Facebook</a>\n          </li>\n          <li>\n            <a className=\"student-info__link\" href=\"https://github.com/kozhevatova\"\n              target=\"_blank\" rel=\"noreferrer\">Github</a>\n          </li>\n        </ul>\n        <img className=\"student-info__photo\" src={myPhoto} alt=\"Фото студента.\" />\n      </div>\n    </Info>\n  );\n};\n\nexport default AboutMe;","import './Portfolio.css';\n\nconst Portfolio = () => {\n  return(\n    <section className=\"portfolio\">\n      <div className=\"portfolio__container\">\n        <h4 className=\"portfolio__title\">Портфолио</h4>\n        <ul className=\"portfolio__links\">\n          <li className=\"portfolio__item\">\n            <a className=\"portfolio__link\" href=\"https://kozhevatova.github.io/how-to-learn/index.html\" target=\"_blank\" rel=\"noreferrer\">\n              Статичный сайт</a>\n          </li>\n          <li className=\"portfolio__item\">\n            <a className=\"portfolio__link\" href=\"https://kozhevatova.github.io/russian-travel/index.html\" target=\"_blank\" rel=\"noreferrer\">\n              Адаптивный сайт</a>\n          </li>\n          <li className=\"portfolio__item\">\n            <a className=\"portfolio__link\" href=\"https://annakin.students.nomoreparties.space\" target=\"_blank\" rel=\"noreferrer\">\n              Одностраничное приложение</a>\n          </li>\n        </ul>\n      </div>\n    </section>\n  );\n};\n\nexport default Portfolio;","import Promo from '../Promo/Promo';\nimport NavTab from '../NavTab/NavTab';\nimport './Main.css';\nimport AboutProject from '../AboutProject/AboutProject';\nimport Techs from '../Techs/Techs';\nimport AboutMe from '../AboutMe/AboutMe';\nimport Portfolio from '../Portfolio/Portfolio';\n\nconst Main = () => {\n  return (\n    <main>\n        <Promo />\n        <NavTab />\n        <AboutProject/>\n        <Techs/>\n        <AboutMe/>\n        <Portfolio/>\n    </main>\n  );\n};\n\nexport default Main;","import './Footer.css';\n\nconst Footer = ({ pathname }) => {\n  const footerClassName = (\n    `footer\n    ${(pathname === '/movies' || pathname === '/saved-movies' || pathname === '/profile') && 'footer_visible'}`\n  )\n  return (\n    <footer className={footerClassName}>\n      <div className=\"footer__container\">\n        <p className=\"footer__caption\">Учебный проект Яндекс.Практикум х BeatFilm</p>\n        <div className=\"footer__info\">\n          <p className=\"footer__date\">&copy; <span id=\"year\">{new Date().getFullYear()}</span></p>\n          <ul className=\"footer__links\">\n            <li className=\"footer__item\">\n              <a className=\"footer__link\" href=\"https://praktikum.yandex.ru/\" target=\"_blank\" rel=\"noreferrer\">Яндекс.Практикум</a>\n            </li>\n            <li className=\"footer__item\">\n              <a className=\"footer__link\" href=\"https://github.com/kozhevatova\" target=\"_blank\" rel=\"noreferrer\">Github</a>\n            </li>\n            <li className=\"footer__item\">\n              <a className=\"footer__link\" href=\"https://www.facebook.com/anna.kozhevatova/\" target=\"_blank\" rel=\"noreferrer\">Facebook</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;","import React, { useCallback } from 'react';\n\n//хук управления формой и валидации формы\nexport function useFormWithValidation(initialValues) {\n  const [values, setValues] = React.useState(initialValues);\n  const [errors, setErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(false);\n\n  const handleChange = (event) => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    setValues({...values, [name]: value});\n    setErrors({...errors, [name]: target.validationMessage });\n    setIsValid(target.closest(\"form\").checkValidity());\n  };\n\n  const resetForm = useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return { values, handleChange, errors, isValid, resetForm };\n}","import { useState } from 'react';\nimport { useFormWithValidation } from '../../utils/useFormWithValidation';\nimport './SearchForm.css';\n\nconst SearchForm = ({ handleSearchSubmit, handleTumblerClick }) => {\n  const { values, handleChange, errors, isValid } = useFormWithValidation({});\n  const [isChecked, setIsChecked] = useState(false);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (isValid) {\n      handleSearchSubmit(values.movie, isChecked); \n    }\n  }\n\n  //запись в стейт текущие значения инпутов при вводе\n  const handleCheckboxChange = (e) => {\n        setIsChecked(e.target.checked);\n        handleTumblerClick(e.target.checked, values.movie);\n  }\n  \n  return (\n    <div className=\"search\">\n      <form className=\"search__form\" onSubmit={handleSubmit} noValidate>\n        <input className={`search__input ${errors && errors[\"movie\"] && 'search__input_type_error'}`} \n        placeholder=\"Фильм\" required onChange={handleChange} name=\"movie\" type=\"text\"\n        pattern=\"^[а-яА-Яa-zA-Z\\d\\s\\-]+$\"></input>\n        <span className=\"search__input-error\">\n          {errors && errors[\"movie\"] && errors[\"movie\"]}\n        </span>\n        <button type=\"submit\" className=\"search__button\" disabled={!isValid}>Поиск</button>\n      </form>\n      <label className=\"search__tumbler\">\n        <input type=\"checkbox\" name=\"shortFilmCheckbox\" className=\"search__checkbox\"\n          checked={isChecked} onChange={handleCheckboxChange}></input>\n        <span className=\"search__slider\"></span>\n        <span className=\"search__label-text\">Короткометражки</span>\n      </label>\n    </div>\n\n  );\n};\n\nexport default SearchForm;","const convertMinToHours = (min) => {\n  return `${Math.floor(min/60)}ч${min % 60}м`\n}\n\nconst checkMovieTitle = (movie, query) => {\n  return movie.nameRU.toLowerCase().replaceAll(/[\"«»]/g, '').split(' ').includes(query.toLowerCase()) ||\n    (movie.nameEN && movie.nameEN.toLowerCase().replaceAll(/[\"«»]/g, '').split(' ').includes(query.toLowerCase()));\n}\n\nconst checkIfIsShort = (movie) => {\n  return movie.duration <= 40;\n}\n\nconst searchMovies = (movies,query) => {\n  const queryArr = query.toLowerCase().trim().split(' ');\n  const result = movies.filter((movie) => {\n    for(let i = 0; i < queryArr.length; i++) {\n      if(!checkMovieTitle(movie, queryArr[i])) {\n        return false;\n      } \n    }\n    return true;\n  });\n  return result;\n}\n\n\nexport { convertMinToHours, searchMovies, checkIfIsShort };","export const BASE_URL_MOVIE = \"https://api.nomoreparties.co\";\n\nclass MoviesApi {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n  }\n\n  _getResponseData(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\n  }\n\n  getBeatFilmMovies() {\n    return fetch(`${this.baseUrl}/beatfilm-movies`, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then((res) => this._getResponseData(res));\n  }\n}\n\nconst moviesApi = new MoviesApi({\n  baseUrl: BASE_URL_MOVIE\n});\n\nexport default moviesApi;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import { useContext } from 'react';\nimport { convertMinToHours } from '../../utils/utils';\nimport { BASE_URL_MOVIE } from '../../utils/MoviesApi';\nimport './MoviesCard.css';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\n\nconst MoviesCard = ({ movie, image, nameRU, duration, isOnSavedPage, saveMovie, deleteMovie }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const isSaved = movie.owner && movie.owner === currentUser._id;\n\n  const handleSaveBtnClick = () => {\n    if (isSaved) {\n      deleteMovie(movie._id, movie);\n    } else {\n      saveMovie(movie);\n    }\n  }\n\n  const handleDeleteBtnClick = () => {\n    deleteMovie(movie._id, movie);\n  }\n\n  const saveButtonClassName = (\n    `movies-card__button movies-card__button_type_save ${isSaved && 'movies-card__button_type_clicked-save'}`\n  );\n\n  return (\n    <li className=\"movies-card\">\n      <a className=\"movies-card__image-link\" href={movie.trailer} target=\"_blank\" rel=\"noreferrer\">\n          <div className=\"movies-card__image\" style={{ background: `center/cover url(${(isSaved && image) ? image : BASE_URL_MOVIE + image.url}) no-repeat` }}></div>\n        </a>\n      <p className=\"movies-card__title\">{nameRU}</p>\n      {\n        isOnSavedPage ?\n          <button type=\"button\" className=\"movies-card__button movies-card__button_type_delete\"\n            aria-label=\"Удалить фильм.\" onClick={handleDeleteBtnClick}></button> :\n          <button type=\"button\" className={saveButtonClassName} onClick={handleSaveBtnClick} aria-label=\"Сохранить фильм.\"></button>\n      }\n      <p className=\"movies-card__duration\">{convertMinToHours(duration)}</p>\n    </li>\n  );\n};\n\nexport default MoviesCard;","import React from 'react'\nimport './Preloader.css'\n\nconst Preloader = () => {\n    return (\n        <div className=\"preloader\">\n            <div className=\"preloader__container\">\n                <span className=\"preloader__round\"></span>\n            </div>\n        </div>\n    )\n};\n\nexport default Preloader;\n","import MoviesCard from \"../MoviesCard/MoviesCard\";\nimport Preloader from '../Preloader/Preloader';\nimport { v4 as uuidv4 } from 'uuid';\nimport './MoviesCardList.css';\n\nconst MoviesCardList = ({ movieList, isOnSavedPage, saveMovie, deleteMovie, isFound, isRequestDone,\n  amountToRender, isLoading }) => {\n\n  const moviesCardlistClassName = (\n    `movies-cardlist \n    ${!isRequestDone && 'movies-cardlist_hidden'}`\n  );\n\n  return <>\n    {isLoading && <Preloader />}\n    <ul className={moviesCardlistClassName}>\n      {/* {isLoading && <Preloader />} */}\n      {\n        isFound ? movieList.slice(0, amountToRender).map((movie) => {\n          return <MoviesCard key={uuidv4()} movie={movie} image={movie.image}\n            nameRU={movie.nameRU} duration={movie.duration} isOnSavedPage={isOnSavedPage}\n            saveMovie={saveMovie} deleteMovie={deleteMovie} />\n        }) : <li className=\"movies-cardlist__not-found-text\">Ничего не найдено</li>\n      }\n    </ul>\n  </>\n\n}\n\nexport default MoviesCardList;","import SearchForm from '../SearchForm/SearchForm';\nimport './Movies.css';\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\n\nconst Movies = ({ movies, handleSearchSubmit, handleTumblerClick, saveMovie, deleteMovie, isFound,\n  isRequestDone, amountToRender, handleMoreBtnClick, isMoreBtnVisible, isLoading }) => {\n\n  const onMoreBtnClick = () => {\n    handleMoreBtnClick(amountToRender);\n  }\n\n  return (\n    <section className=\"movies\">\n      <SearchForm handleSearchSubmit={handleSearchSubmit} handleTumblerClick={handleTumblerClick} />\n      <MoviesCardList movieList={movies} isOnSavedPage={false} saveMovie={saveMovie} deleteMovie={deleteMovie}\n        isFound={isFound} isRequestDone={isRequestDone} amountToRender={amountToRender} isLoading={isLoading} />\n      {isMoreBtnVisible && <button className=\"movies__more-btn\" type=\"button\" onClick={onMoreBtnClick}>Ещё</button>}\n    </section>\n  );\n};\n\nexport default Movies;","import MoviesCardList from '../MoviesCardList/MoviesCardList';\nimport SearchForm from '../SearchForm/SearchForm';\nimport './SavedMovies.css';\n\nconst SavedMovies = ({ movies, handleSearchSubmit, handleTumblerClick, saveMovie, deleteMovie, isFound, isRequestDone }) => {\n  return (\n    <section className=\"saved-movies\">\n      <SearchForm handleSearchSubmit={handleSearchSubmit} handleTumblerClick={handleTumblerClick} />\n      <MoviesCardList movieList={movies} isOnSavedPage={true} saveMovie={saveMovie} deleteMovie={deleteMovie}\n        isFound={isFound} isRequestDone={isRequestDone} />\n    </section>\n  );\n};\n\nexport default SavedMovies;","import React, { useContext } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport './Profile.css';\nimport { useFormWithValidation } from '../../utils/useFormWithValidation';\n\nconst Profile = ({ handleLogout, handleSubmit }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const { values, handleChange, errors, isValid } = useFormWithValidation({\n    name: currentUser.name,\n    email: currentUser.email\n  });\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (isValid) {\n      handleSubmit(values);\n    }\n  }\n  return (\n    <section className=\"profile\">\n      <form className=\"profile__form\" method=\"POST\" onSubmit={onSubmit} noValidate>\n        <h3 className=\"profile__greeting\">Привет, {currentUser.name} !</h3>\n        <div className=\"profile__inputs\">\n          <p className=\"profile__text profile__text_type_name\">Имя</p>\n          <div className=\"profile__area profile__area_type_name\">\n            <input className=\"profile__input profile__input_type_name\" placeholder=\"Имя\" id=\"name-input\"\n              name=\"name\" onChange={handleChange} value={values.name} minLength=\"2\" maxLength=\"30\" required></input>\n            <span className=\"profile__input-error\" id=\"name-input-error\">\n              {errors && errors[\"name\"] !== \"\" && errors[\"name\"]}\n            </span>\n          </div>\n          <div className=\"profile__area profile__area_type_email\">\n            <input className=\"profile__input profile__input_type_email\" type=\"email\" placeholder=\"Почта\"\n              id=\"email-input\" name=\"email\" onChange={handleChange} value={values.email} required\n              pattern=\"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[a-z]{2,})\\b\"></input>\n            <span className=\"profile__input-error\" id=\"email-input-error\">\n              {errors && errors[\"email\"] !== \"\" && errors[\"email\"]}\n            </span>\n          </div>\n          <p className=\"profile__text profile__text_type_email\">Почта</p>\n        </div>\n        <button type=\"submit\" className=\"profile__button\" disabled={!isValid}>Редактировать</button>\n        <NavLink to=\"/\" className=\"profile__link\" onClick={handleLogout}>Выйти из аккаунта</NavLink>\n      </form>\n    </section>\n  );\n};\n\nexport default Profile;","import { NavLink } from 'react-router-dom';\nimport './AuthForm.css';\nimport { useFormWithValidation } from '../../utils/useFormWithValidation';\n\nconst AuthForm = ({ greeting, isNameVisible, buttonText, handleSubmit,\n  captionText, route, navLinkText }) => {\n  const { values, handleChange, errors, isValid } = useFormWithValidation({});\n  \n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (isValid) {\n      handleSubmit(values);\n    }\n  }\n\n  return (\n    <form className=\"auth\" method=\"POST\" onSubmit={onSubmit} noValidate>\n      <NavLink to=\"/\" className=\"auth__logo\" />\n      <h3 className=\"auth__greeting\">{greeting}</h3>\n\n      <div className=\"auth__inputs\">\n        {isNameVisible &&\n          <div className=\"auth__name-area\">\n            <label className=\"auth__label\">Имя</label>\n            <input className={`auth__input ${errors && errors[\"name\"] && 'auth__input_type_error'}`} \n            placeholder=\"Имя\" name=\"name\" required id=\"name-input\" minLength=\"2\" maxLength=\"30\"  \n            onChange={handleChange} />\n            <span className=\"auth__input-error\" id=\"name-input-error\">\n            {errors && errors[\"name\"] && errors[\"name\"]}\n            </span>\n          </div>\n        }\n\n        <label className=\"auth__label\">Email</label>\n        <input className={`auth__input ${errors && errors[\"email\"] && 'auth__input_type_error'}`}\n         placeholder=\"Email\" type=\"email\" name=\"email\" required id=\"email-input\" onChange={handleChange}\n          pattern=\"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[a-z]{2,})\\b\" />\n        <span className=\"auth__input-error\" id=\"email-input-error\">\n          {errors && errors[\"email\"] && errors[\"email\"]}\n        </span>\n\n        <label className=\"auth__label\">Пароль</label>\n        <input className={`auth__input ${errors && errors[\"password\"] && 'auth__input_type_error'}`} placeholder=\"Пароль\" type=\"password\" minLength=\"8\"\n          required name=\"password\" id=\"password-input\" onChange={handleChange} />\n        <span className=\"auth__input-error\" id=\"password-input-error\">\n        {errors && errors[\"password\"] && errors[\"password\"]}\n        </span>\n      </div>\n\n      <button className=\"auth__submit-btn\" type=\"submit\" disabled={!isValid}>{buttonText}</button>\n      <p className=\"auth__caption\">{captionText}\n        <NavLink to={route} className=\"auth__link\">{navLinkText}</NavLink>\n      </p>\n    </form>\n  );\n};\n\nexport default AuthForm;","import AuthForm from '../AuthForm/AuthForm';\nimport './Login.css';\n\nconst Login = ({ onLogin }) => {\n  return (\n    <section className=\"login\">\n      <AuthForm\n        greeting=\"Рады видеть!\"\n        isNameVisible={false}\n        buttonText=\"Войти\"\n        handleSubmit={onLogin}\n        captionText=\"Еще не зарегистированы? \"\n        route=\"/signup\"\n        navLinkText=\"Регистрация\"\n      />\n    </section>\n  );\n};\n\nexport default Login;","import AuthForm from '../AuthForm/AuthForm';\nimport './Register.css';\n\nconst Register = ({ onRegister }) => {\n  return(\n    <section className=\"register\">\n      <AuthForm\n      greeting=\"Добро пожаловать!\"\n      isNameVisible={true}\n      buttonText=\"Зарегистрироваться\"\n      handleSubmit={onRegister}\n      captionText=\"Уже зарегистрированы? \"\n      route=\"/signin\"\n      navLinkText=\"Войти\"\n    />\n    </section>\n    \n  );\n};\n\nexport default Register;","import { useHistory } from 'react-router-dom';\nimport './NotFoundPage.css';\n\nconst NotFoundPage = () => {\n  const history = useHistory();\n  const handleGoBack = () => {\n    history.goBack();\n  }\n  return(\n    <section className=\"not-found\">\n      <h1 className=\"not-found__title\">404</h1>\n      <p className=\"not-found__text\">Страница не найдена</p>\n      <button className=\"not-found__link\" onClick={handleGoBack}>Назад</button>\n    </section>\n  );\n}\n\nexport default NotFoundPage;","import './Menu.css';\nimport Navigation from '../Navigation/Navigation';\n\nconst Menu = ({ handleMenuClose, isOpen, handleOnSavedMoviesClick, handleOnMoviesClick, onClick }) => {\n  return (\n    <section className={`menu ${isOpen && 'menu_opened'}`} onClick={onClick}>\n      <div className=\"menu__area\">\n        <button className=\"menu__close-btn\" onClick={handleMenuClose}></button>\n        <Navigation handleOnSavedMoviesClick={handleOnSavedMoviesClick} handleOnMoviesClick={handleOnMoviesClick} />\n      </div>\n    </section>\n  );\n};\n\nexport default Menu;","import './InfoPopup.css';\n\nconst InfoPopup = ({ closePopup, isOpen, message, onClick }) => {\n  return (\n    <section className={`popup ${isOpen && 'popup_opened'}`} onClick={onClick}>\n      <div className=\"popup__container\">\n        <button className=\"popup__close-btn\" type=\"button\" onClick={closePopup}></button>\n        <p className=\"popup__message\">{message}</p>\n      </div>\n    </section>\n  );\n}\n\nexport default InfoPopup;","const shortFilmCheckbox = 'shortFilmCheckbox';\nconst movieInput = \"movieInput\";\nconst registerSuccessMessage = 'Вы успешно зарегистрированы!';\nconst failMessage = 'Произошла ошибка! Попробуйте ещё раз.';\nconst updateSuccessMessage = 'Данные успешно обновлены!';\nconst movieSearchFailedMessage = 'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз';\n\nconst amountToRender1280 = 12;\nconst defaultAmountToRender1280 = 3;\nconst amountToRender1024 = 9;\nconst defaultAmountToRender1024 = 3;\nconst amountToRender768 = 8;\nconst defaultAmountToRender768 = 2;\nconst amountToRender320 = 5;\nconst defaultAmountToRender320 = 2;\n\nconst defaultProp = 'default';\n\nexport { shortFilmCheckbox, movieInput, registerSuccessMessage,\n  failMessage, updateSuccessMessage, movieSearchFailedMessage, defaultProp,\n  amountToRender1280, amountToRender1024, amountToRender768, amountToRender320,\n  defaultAmountToRender1280, defaultAmountToRender1024, defaultAmountToRender768,\n  defaultAmountToRender320\n};","import { BASE_URL_MOVIE } from \"./MoviesApi\";\nimport { defaultProp } from './constants';\n\nclass MainApi {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n  }\n\n  _getResponseData(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\n  }\n\n  getMovies(jwt) {\n    return fetch(`${this.baseUrl}/movies`, {\n      headers: {\n        authorization: `Bearer ${jwt}`,\n        'Content-Type': 'application/json'\n      }\n    }).then((res) => this._getResponseData(res));\n  }\n\n  saveMovie(jwt, movie) {\n    return fetch(`${this.baseUrl}/movies`, {\n      headers: {\n        authorization: `Bearer ${jwt}`,\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({\n        country: movie.country ? movie.country : defaultProp, \n        director: movie.director ? movie.director : defaultProp, \n        duration: movie.duration ? movie.duration : 0, \n        year: movie.year ? movie.year : 0, \n        description: movie.description ? movie.description : defaultProp, \n        image: movie.image.url ? BASE_URL_MOVIE + movie.image.url : movie.image, \n        trailer: movie.trailer ? movie.trailer : movie.trailerLink, \n        nameRU: movie.nameRU ? movie.nameRU : defaultProp, \n        nameEN: movie.nameEN ? movie.nameEN : defaultProp, \n        thumbnail: movie.thumbnail ? movie.thumbnail : BASE_URL_MOVIE + movie.image.formats.thumbnail.url, \n        movieId: movie.id\n      })\n    })\n      .then((res) => this._getResponseData(res));\n  }\n\n  deleteMovieFromSaved(jwt, movieId) {\n    return fetch(`${this.baseUrl}/movies/${movieId}`, {\n      headers: {\n        authorization: `Bearer ${jwt}`,\n        'Content-Type': 'application/json'\n      },\n      method: 'DELETE',\n    })\n      .then((res) => this._getResponseData(res));\n  }\n\n  toggleMovieSave(jwt, movie, movieId, isSaved) {\n    return isSaved ? this.deleteMovieFromSaved(jwt, movieId) : this.saveMovie(jwt, movie);\n  }\n\n  getUserInfo(jwt) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: {\n        authorization: `Bearer ${jwt}`,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then((res) => this._getResponseData(res));\n  }\n\n  updateUserInfo(jwt, email, name) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: {\n        authorization: `Bearer ${jwt}`,\n        'Content-Type': 'application/json'\n      },\n      method: 'PATCH',\n      body: JSON.stringify({\n        email,\n        name\n      })\n    })\n      .then((res) => this._getResponseData(res));\n  }\n};\n\nconst mainApi = new MainApi({\n  baseUrl: \"https://api.annakin.diploma.students.nomoredomains.monster\"\n});\n\nexport default mainApi;","export const BASE_URL = \"https://api.annakin.diploma.students.nomoredomains.monster\";\n\nexport const register = (email, password, name) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n     email, password, name\n    })\n  })\n    .then((res) => {\n      try {\n        if(res.status === 200) {\n          return res.json();\n        }\n      } catch(err) {\n        return err;\n      }\n    })\n    .then((res) => {\n      return res;\n    });\n}\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      \"email\": email,\n      \"password\": password\n    })\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        return data;\n      }\n    });\n}\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`,{\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\" : `Bearer ${token}`\n    }\n  })\n  .then((res) => res.json())\n  .then((data) => data);\n}","import { Redirect, Route } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {\n        () => props.isLoggedIn ?\n          <Component {...props} /> :\n          <Redirect to=\"./signin\" />\n      }\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;","import './App.css';\nimport React, { useEffect, useState } from 'react';\nimport Header from '../Header/Header';\nimport Main from '../Main/Main';\nimport Footer from '../Footer/Footer';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport { Route, Switch, useHistory, useLocation } from 'react-router';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport Register from '../Register/Register';\nimport NotFoundPage from '../NotFoundPage/NotFoundPage';\nimport Menu from '../Menu/Menu';\nimport InfoPopup from '../InfoPopup/InfoPopup';\nimport mainApi from '../../utils/MainApi';\nimport moviesApi from '../../utils/MoviesApi';\nimport * as auth from '../../utils/auth';\nimport { checkIfIsShort, searchMovies } from '../../utils/utils';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\nimport { amountToRender1024, amountToRender1280, amountToRender320, \n  amountToRender768, defaultAmountToRender1024, defaultAmountToRender1280, \n  defaultAmountToRender320, defaultAmountToRender768, failMessage, \n  movieSearchFailedMessage, registerSuccessMessage, updateSuccessMessage } from '../../utils/constants';\n\nfunction App() {\n  const history = useHistory();\n  const location = useLocation();\n\n  const [currentUser, setCurrentUser] = useState({});\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegisterFailed, setIsRegisterFailed] = useState(false);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isInfoPopupOpen, setIsInfoPopupOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [popupMessage, setPopupMessage] = useState('');\n\n  const [beatfilmMovies, setBeatfilmMovies] = useState([]);\n  const [movies, setMovies] = useState([]);\n  const [savedMovies, setSavedMovies] = useState([]);\n  const [isFoundInMovies, setIsFoundInMovies] = useState(false);\n  const [isFoundInSavedMovies, setIsFoundInSavedMovies] = useState(false);\n  const [isRequestDone, setIsRequestDone] = useState(false);\n  const [isRequestInSavedDone, setIsRequestInSavedDone] = useState(false);\n  const [amountToRender, setAmountToRender] = useState(0);\n  const [defaultAmountToRender, setDefaultAmountToRender] = useState(0);\n  const [isMoreBtnVisible, setIsMoreBtnVisible] = useState(false);\n  const [isOnSavedPage, setIsOnSavedPage] = useState(false);\n\n  useEffect(() => {\n    setIsLoading(true);\n    const jwt = localStorage.getItem('jwt');\n    if (isLoggedIn) {\n      Promise.all([\n        mainApi.getMovies(jwt),\n        mainApi.getUserInfo(jwt)\n      ]).then((values) => {\n        const [savedMovies, userInfo] = values;\n        localStorage.setItem('savedMovies', JSON.stringify(savedMovies));\n        setSavedMovies(savedMovies);\n        setCurrentUser(userInfo);\n        if (localStorage.getItem('beatFilmMovies')) {\n          setBeatfilmMovies(JSON.parse(localStorage.getItem('beatFilmMovies')));\n        }\n      })\n        .catch((err) => console.log(err))\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n\n  }, [isLoggedIn]);\n\n  useEffect(() => {\n    window.addEventListener('resize', checkWidth);\n    return () => window.removeEventListener('resize', checkWidth);\n  }, [])\n\n  // проверка залогиген ли пользователь\n  useEffect(() => {\n    const handleTokenCheck = () => {\n      if (localStorage.getItem('jwt')) {\n        const jwt = localStorage.getItem('jwt');\n        auth.checkToken(jwt)\n          .then((res) => {\n            if (res) {\n              setCurrentUser({ email: res.email, name: res.name, _id: res._id });\n              setIsLoggedIn(true);\n              history.push('/movies');\n            }\n            else {\n              setIsLoggedIn(false);\n              history.push('/');\n            }\n          })\n          .catch((err) => console.log(err));\n      }\n    }\n    handleTokenCheck();\n    // очистка фильмов последнего поиска в хранилище\n    localStorage.removeItem('movies');\n  }, [history]);\n\n  // определение количества карточек для отрисовки в зависимости от ширины экрана\n  const checkWidth = () => {\n    let renderValue = 0;\n    if (window.innerWidth >= 1280) {\n      setDefaultAmountToRender(defaultAmountToRender1280);\n      setAmountToRender(amountToRender1280);\n      renderValue = amountToRender1280;\n    }\n    if (window.innerWidth >= 1024 && window.innerWidth < 1279) {\n      setDefaultAmountToRender(defaultAmountToRender1024);\n      setAmountToRender(amountToRender1024);\n      renderValue = amountToRender1024;\n    }\n    if (window.innerWidth < 1024 && window.innerWidth > 480) {\n      setDefaultAmountToRender(defaultAmountToRender768);\n      setAmountToRender(amountToRender768);\n      renderValue = amountToRender768;\n    }\n    if (window.innerWidth <= 480 && window.innerWidth >= 320) {\n      setDefaultAmountToRender(defaultAmountToRender320);\n      setAmountToRender(amountToRender320);\n      renderValue = amountToRender320;\n    }\n    const localMovies = JSON.parse(localStorage.getItem('movies'));\n    setIsMoreBtnVisible(localMovies && (localMovies.length > renderValue));\n    return { renderValue };\n  }\n\n  // обновление найденных фильмов с учетом сохраненных\n  const updateMovies = (movies, isShortFilm) => {\n    const amount = checkWidth();\n    const moviesWithSavedOnes = movies.map((movie) => {\n      const savedItem = savedMovies.find((m) => m.movieId === movie.id);\n      return savedItem ? savedItem : movie;\n    });\n    localStorage.setItem('movies', JSON.stringify(moviesWithSavedOnes));\n    if (isShortFilm) {\n      const shortFilms = moviesWithSavedOnes.filter(checkIfIsShort);\n      setMovies(shortFilms);\n      setIsMoreBtnVisible(shortFilms.length > amount.renderValue);\n    } else {\n      setMovies(moviesWithSavedOnes);\n    }\n  };\n\n  // поиск фильма среди всех по ключевым словам и фильтр короткометражек\n  const searchPromise = (query) => {\n    return new Promise((resolve, reject) => {\n      if (beatfilmMovies.length === 0) {\n        moviesApi.getBeatFilmMovies()\n          .then((movies) => {\n            localStorage.setItem('beatFilmMovies', JSON.stringify(movies));\n            setBeatfilmMovies(movies);\n            resolve(searchMovies(movies, query));\n          })\n          .catch((err) => {\n            console.log(err);\n            reject(err);\n          });\n      } else {\n        resolve(searchMovies(beatfilmMovies, query));\n      }\n    });\n  }\n\n  // поиск фильма среди сохраненных по ключевым словам и фильтр короткометражек\n  const searchInSavedPromise = (query) => {\n    return new Promise((resolve, reject) => {\n      if (savedMovies) {\n        resolve(searchMovies(savedMovies, query))\n      } else {\n        reject(movieSearchFailedMessage);\n      }\n    });\n  }\n\n  // обработчик поиска по всем фильмам\n  const handleSearchInMovies = (query, isShortFilm) => {\n    setIsLoading(true);\n    searchPromise(query)\n      .then((res) => {\n        if (res && res.length > 0) {\n          setIsFoundInMovies(true);\n          localStorage.setItem('movies', JSON.stringify(res));\n          updateMovies(res, isShortFilm);\n        } else {\n          localStorage.removeItem('movies');\n          setIsFoundInMovies(false);\n          setIsMoreBtnVisible(false);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        openInfoPopup(movieSearchFailedMessage);\n      })\n      .finally(() => {\n        setIsRequestDone(true);\n        setIsLoading(false);\n      });\n  }\n\n  // обработчик поиска по сохраненным фильмам\n  const handleSearchInSaved = (query, isShortFilm) => {\n    setIsLoading(true);\n    searchInSavedPromise(query, isShortFilm)\n      .then((res) => {\n        if (res && res.length > 0) {\n          setIsFoundInSavedMovies(true);\n          setSavedMovies(res);\n        } else {\n          setIsFoundInSavedMovies(false);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        openInfoPopup(movieSearchFailedMessage);\n      })\n      .finally(() => {\n        setIsRequestInSavedDone(true);\n        setIsLoading(false);\n      })\n  }\n\n  // поиск по фильмам\n  const handleSearch = (query, isShortFilm) => {\n    isOnSavedPage ? handleSearchInSaved(query, isShortFilm) : handleSearchInMovies(query, isShortFilm);\n  }\n\n  // фильтр короткометражек в фильмах\n  const filterShortFilms = (isChecked) => {\n    const localMovies = JSON.parse(localStorage.getItem('movies'));\n    if (localMovies && localMovies.length > 0) {\n      setIsFoundInMovies(true);\n      updateMovies(localMovies, isChecked);\n    }\n    setIsRequestDone(true);\n  }\n\n  // фильтр короткометражек в сохраненных фильмах\n  const filterShortFilmsInSaved = (isChecked) => {\n    const localSavedMovies = JSON.parse(localStorage.getItem('savedMovies'));\n    if (localSavedMovies && localSavedMovies.length > 0) {\n      setIsFoundInSavedMovies(true);\n      if (isChecked) {\n        const shortFilms = savedMovies.filter(checkIfIsShort);\n        setSavedMovies(shortFilms);\n      } else {\n        setSavedMovies(localSavedMovies);\n      }\n    }\n    setIsRequestInSavedDone(true);\n  }\n\n  // обработчик переключения тумблера короткометражки\n  const handleTumblerClick = (isChecked) => {\n    if (isRequestDone || isRequestInSavedDone) {\n      isOnSavedPage ? filterShortFilmsInSaved(isChecked) : filterShortFilms(isChecked);\n    }\n  }\n\n  // сохранение фильма в личном кабинете\n  const saveMovie = (movie) => {\n    const jwt = localStorage.getItem('jwt');\n    const localSavedMovies = JSON.parse(localStorage.getItem('savedMovies'));\n    const isSaved = localSavedMovies.some((m) => m.movieId === movie.id);\n    if (!isSaved) {\n      setIsLoading(true);\n      mainApi.saveMovie(jwt, movie)\n        .then((movie) => {\n          setMovies(movies.map((m) => m.id === movie.movieId ? movie : m));\n          const newSavedMovies = [movie, ...localSavedMovies];\n          localStorage.setItem('savedMovies', JSON.stringify(newSavedMovies));\n          setSavedMovies(newSavedMovies);\n        })\n        .catch((err) => console.log(err))\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }\n\n  // // удаление фильма из сохраненных\n  const deleteMovie = (movieId, movie) => {\n    setIsLoading(true);\n    const jwt = localStorage.getItem('jwt');\n    const localSavedMovies = JSON.parse(localStorage.getItem('savedMovies'));\n    mainApi.deleteMovieFromSaved(jwt, movieId)\n      .then((deletedMovie) => {\n        const newMovies = localSavedMovies.filter((movie) => movie._id !== deletedMovie._id);\n        localStorage.setItem('savedMovies', JSON.stringify(newMovies));\n        setSavedMovies(newMovies);\n        setMovies(movies.map((movie) => movie._id === movieId ? beatfilmMovies.find((m) => m.id === movie.movieId) : movie));\n      })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  // сброс фильмов после поиска и отображение всех сохраненных фильмов\n  const handleOnSavedMoviesClick = () => {\n    setIsOnSavedPage(true);\n    const localSavedMovies = JSON.parse(localStorage.getItem('savedMovies'));\n    if (localSavedMovies && localSavedMovies.length > 0) {\n      setIsFoundInSavedMovies(true);\n      setIsRequestInSavedDone(true);\n      setSavedMovies(localSavedMovies);\n    }\n  }\n\n  const handleOnMoviesClick = () => {\n    setIsOnSavedPage(false);\n    const localMovies = JSON.parse(localStorage.getItem('movies'));\n    if (localMovies && localMovies.length > 0) {\n      setIsFoundInMovies(true);\n      setIsRequestDone(true);\n      updateMovies(localMovies, false);\n    }\n  }\n\n  // обработчик клика по кнопке \"Еще\"\n  const handleMoreBtnClick = () => {\n    const newAmount = amountToRender + Math.min((movies.length - amountToRender), defaultAmountToRender);\n    setAmountToRender(newAmount);\n    if (movies.length - newAmount === 0) {\n      setIsMoreBtnVisible(false);\n    }\n  }\n\n  // открытие меню на разрешении ниже 1024px\n  const openMenu = () => {\n    setIsMenuOpen(true);\n    setEscListener();\n  }\n\n  // попап при ошибках в работе api\n  const openInfoPopup = (message) => {\n    setEscListener();\n    setPopupMessage(message);\n    setIsInfoPopupOpen(true);\n  }\n\n  // закрытие меню инфо\n  const closeAllPopups = () => {\n    setIsMenuOpen(false);\n    setIsInfoPopupOpen(false);\n    removeEscListener();\n  }\n\n  //обработчик закрытия по нажатию Esc\n  const handleEscClose = (event) => {\n    if (event.key === 'Escape') {\n      closeAllPopups();\n    }\n  }\n\n  //обработчик закрытия попапов при нажатии по фону\n  const handleCLosePopupByClickOnOverlay = (event) => {\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n    closeAllPopups();\n  }\n\n  const setEscListener = () => {\n    document.addEventListener('keydown', handleEscClose);\n  }\n\n  const removeEscListener = () => {\n    document.removeEventListener('keydown', handleEscClose);\n  }\n\n  // авторизация\n  const handleLogin = ({ email, password }) => {\n    auth.authorize(email, password)\n      .then((data) => {\n        if (data && data.token) {\n          setCurrentUser({ email: data.email, name: data.name, _id: data._id })\n          setIsLoggedIn(true);\n          history.push('/movies');\n        } else {\n          setIsLoggedIn(false);\n          history.push('/');\n        }\n      })\n      .catch((err) => console.log(err.message));\n  }\n\n  // регистрация\n  const handleRegister = ({ email, password, name }) => {\n    auth.register(email, password, name)\n      .then((res) => {\n        console.log('res', res);\n        if (res) {\n          setIsRegisterFailed(false);\n          openInfoPopup(registerSuccessMessage);\n          handleLogin({email, password});\n        } else {\n          setIsRegisterFailed(true);\n          openInfoPopup(failMessage);\n        }\n      })\n      .catch((err) => {\n        setIsRegisterFailed(true);\n        openInfoPopup(failMessage);\n        console.log(err.message);\n      });\n  }\n\n  // выход из аккаунта\n  const handleLogout = () => {\n    setIsLoggedIn(false);\n    setCurrentUser({});\n    localStorage.removeItem('jwt');\n    history.push('/');\n  }\n\n  // обработчик обновления данных пользователя\n  const handleEditProfile = ({ email, name }) => {\n    setIsLoading(true);\n    const jwt = localStorage.getItem('jwt');\n    mainApi.updateUserInfo(jwt, email, name)\n      .then((res) => {\n        if (res) {\n          setCurrentUser({ email: res.email, name: res.name, _id: res._id });\n          openInfoPopup(updateSuccessMessage);\n        }\n      })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <Header pathname={location.pathname} isLoggedIn={isLoggedIn} handleMenuOpen={openMenu}\n          handleOnSavedMoviesClick={handleOnSavedMoviesClick} handleOnMoviesClick={handleOnMoviesClick} />\n        <Switch>\n          <Route exact path=\"/\">\n            <Main />\n          </Route>\n          <ProtectedRoute path=\"/movies\" component={Movies} isLoggedIn={isLoggedIn} movies={movies}\n            handleSearchSubmit={handleSearch} handleTumblerClick={handleTumblerClick} saveMovie={saveMovie}\n            deleteMovie={deleteMovie} isFound={isFoundInMovies} isRequestDone={isRequestDone} amountToRender={amountToRender}\n            handleMoreBtnClick={handleMoreBtnClick} isMoreBtnVisible={isMoreBtnVisible} isLoading={isLoading} />\n          <ProtectedRoute path=\"/saved-movies\" component={SavedMovies} isLoggedIn={isLoggedIn} movies={savedMovies}\n            handleSearchSubmit={handleSearchInSaved} handleTumblerClick={handleTumblerClick} saveMovie={saveMovie}\n            deleteMovie={deleteMovie} isFound={isFoundInSavedMovies} isRequestDone={isRequestInSavedDone} isLoading={isLoading} />\n          <ProtectedRoute path=\"/profile\" component={Profile} isLoggedIn={isLoggedIn} handleLogout={handleLogout}\n            handleSubmit={handleEditProfile} isLoading={isLoading} />\n          <Route path=\"/signin\">\n            <Login onLogin={handleLogin} />\n          </Route>\n          <Route path=\"/signup\">\n            <Register onRegister={handleRegister} />\n          </Route>\n          <Route path=\"*\">\n            <NotFoundPage />\n          </Route>\n        </Switch>\n\n        <Footer pathname={location.pathname} />\n\n        <Menu handleMenuClose={closeAllPopups} isOpen={isMenuOpen} handleOnSavedMoviesClick={handleOnSavedMoviesClick}\n          handleOnMoviesClick={handleOnMoviesClick} onClick={handleCLosePopupByClickOnOverlay} />\n        <InfoPopup closePopup={closeAllPopups} isOpen={isInfoPopupOpen} isFailed={isRegisterFailed} message={popupMessage}\n          onClick={handleCLosePopupByClickOnOverlay} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}